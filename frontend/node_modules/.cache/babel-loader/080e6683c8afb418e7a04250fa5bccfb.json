{"ast":null,"code":"var _jsxFileName = \"/Users/work/Documents/GitHub/referall-project/frontend/src/components/dashboard.component.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Chart from 'kaktana-react-lightweight-charts';\nimport './dashboard.css';\nimport axios from 'axios'; //pass in viewed user, connection status, and id of user who is viewing\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Dashboard extends Component {\n  constructor(props) {\n    super(props);\n    this.bcws = new WebSocket(\"wss://stream.binance.us:9443/ws/btcusdt@trade\");\n    this.updatePosts = this.updatePosts.bind(this);\n    this.bcOnMessage = this.bcOnMessage.bind(this);\n    this.state = {\n      posts: [],\n      bcLineSeries: [],\n      bcData: [],\n      bcPrice: 0,\n      options: {\n        alignLabels: true,\n        timeScale: {\n          rightOffset: 12,\n          barSpacing: 3,\n          fixLeftEdge: true,\n          lockVisibleTimeRangeOnResize: true,\n          rightBarStaysOnScroll: true,\n          borderVisible: false,\n          borderColor: \"#fff000\",\n          visible: true,\n          timeVisible: true,\n          secondsVisible: false\n        }\n      }\n    };\n  }\n\n  componentDidMount() {\n    const user = localStorage.getItem(\"userID\");\n    alert(user);\n\n    if (user.length == 0) {\n      alert(\"you are not logged in\");\n      window.location.href = '/login';\n    }\n\n    this.bcws.onmessage = e => this.bcOnMessage(e);\n\n    this.updatePosts();\n  }\n\n  bcOnMessage(event) {\n    var response = JSON.parse(event.data);\n    var utcMiliSec = response.E;\n    var temp = {\n      time: utcMiliSec,\n      value: response.p\n    };\n    var data = this.state.bcData;\n    console.log(data);\n    var lineSeries = this.state.bcLineSeries;\n    console.log(lineSeries);\n    data.push(temp);\n    lineSeries.data = data;\n    this.setState({\n      bcData: data,\n      bcPrice: response.p,\n      bcLineSeries: lineSeries\n    });\n  }\n\n  updatePosts() {\n    const user = localStorage.getItem(\"userID\");\n    axios.post(\"http://localhost:5000/posts/byuser\", {\n      user: user\n    }).then(function (res) {\n      console.log(res);\n      this.setState({\n        posts: res.data.posts\n      });\n      console.log(this.state.posts);\n    }.bind(this)).catch(err => console.log('Error: ' + err));\n  }\n\n  render() {\n    console.log(\"render\");\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"postDisplay\",\n      children: /*#__PURE__*/_jsxDEV(Chart, {\n        options: this.state.options,\n        lineSeries: this.state.bcLineSeries,\n        autoWidth: true,\n        height: 320\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Dashboard;","map":{"version":3,"sources":["/Users/work/Documents/GitHub/referall-project/frontend/src/components/dashboard.component.js"],"names":["React","Component","Link","Chart","axios","Dashboard","constructor","props","bcws","WebSocket","updatePosts","bind","bcOnMessage","state","posts","bcLineSeries","bcData","bcPrice","options","alignLabels","timeScale","rightOffset","barSpacing","fixLeftEdge","lockVisibleTimeRangeOnResize","rightBarStaysOnScroll","borderVisible","borderColor","visible","timeVisible","secondsVisible","componentDidMount","user","localStorage","getItem","alert","length","window","location","href","onmessage","e","event","response","JSON","parse","data","utcMiliSec","E","temp","time","value","p","console","log","lineSeries","push","setState","post","then","res","catch","err","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AACA,OAAOC,KAAP,MAAkB,kCAAlB;AACA,OAAO,iBAAP;AAEA,OAAOC,KAAP,MAAkB,OAAlB,C,CACA;;;;AACA,MAAMC,SAAN,SAAwBJ,SAAxB,CAAkC;AAEhCK,EAAAA,WAAW,CAACC,KAAD,EAAO;AAChB,UAAMA,KAAN;AADgB,SADlBC,IACkB,GADX,IAAIC,SAAJ,CAAe,+CAAf,CACW;AAGhB,SAAKC,WAAL,GAAkB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAlB;AAEA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKE,KAAL,GAAa;AACXC,MAAAA,KAAK,EAAG,EADG;AAEXC,MAAAA,YAAY,EAAG,EAFJ;AAGXC,MAAAA,MAAM,EAAE,EAHG;AAIXC,MAAAA,OAAO,EAAE,CAJE;AAKXC,MAAAA,OAAO,EAAE;AACPC,QAAAA,WAAW,EAAE,IADN;AAEPC,QAAAA,SAAS,EAAE;AACTC,UAAAA,WAAW,EAAE,EADJ;AAETC,UAAAA,UAAU,EAAE,CAFH;AAGTC,UAAAA,WAAW,EAAE,IAHJ;AAITC,UAAAA,4BAA4B,EAAE,IAJrB;AAKTC,UAAAA,qBAAqB,EAAE,IALd;AAMTC,UAAAA,aAAa,EAAE,KANN;AAOTC,UAAAA,WAAW,EAAE,SAPJ;AAQTC,UAAAA,OAAO,EAAE,IARA;AASTC,UAAAA,WAAW,EAAE,IATJ;AAUTC,UAAAA,cAAc,EAAE;AAVP;AAFJ;AALE,KAAb;AAuBD;;AAEDC,EAAAA,iBAAiB,GAAE;AACjB,UAAMC,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAb;AACAC,IAAAA,KAAK,CAACH,IAAD,CAAL;;AACA,QAAIA,IAAI,CAACI,MAAL,IAAc,CAAlB,EAAqB;AACjBD,MAAAA,KAAK,CAAC,uBAAD,CAAL;AACAE,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,QAAvB;AACH;;AAAA,SAAK/B,IAAL,CAAUgC,SAAV,GAAuBC,CAAD,IAAM,KAAK7B,WAAL,CAAiB6B,CAAjB,CAA5B;;AACD,SAAK/B,WAAL;AACH;;AAEDE,EAAAA,WAAW,CAAC8B,KAAD,EAAO;AACd,QAAIC,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWH,KAAK,CAACI,IAAjB,CAAf;AACA,QAAIC,UAAU,GAAGJ,QAAQ,CAACK,CAA1B;AACA,QAAIC,IAAI,GAAG;AAACC,MAAAA,IAAI,EAAEH,UAAP;AAAmBI,MAAAA,KAAK,EAAER,QAAQ,CAACS;AAAnC,KAAX;AACA,QAAIN,IAAI,GAAG,KAAKjC,KAAL,CAAWG,MAAtB;AACAqC,IAAAA,OAAO,CAACC,GAAR,CAAYR,IAAZ;AACA,QAAIS,UAAU,GAAG,KAAK1C,KAAL,CAAWE,YAA5B;AACAsC,IAAAA,OAAO,CAACC,GAAR,CAAYC,UAAZ;AACAT,IAAAA,IAAI,CAACU,IAAL,CAAUP,IAAV;AACAM,IAAAA,UAAU,CAACT,IAAX,GAAkBA,IAAlB;AACA,SAAKW,QAAL,CAAc;AACVzC,MAAAA,MAAM,EAAE8B,IADE;AAEV7B,MAAAA,OAAO,EAAE0B,QAAQ,CAACS,CAFR;AAGVrC,MAAAA,YAAY,EAAEwC;AAHJ,KAAd;AAMH;;AACD7C,EAAAA,WAAW,GAAE;AACT,UAAMsB,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAb;AAGD9B,IAAAA,KAAK,CAACsD,IAAN,CAAW,oCAAX,EAAiD;AAAC1B,MAAAA,IAAI,EAAEA;AAAP,KAAjD,EACK2B,IADL,CACU,UAASC,GAAT,EAAa;AACjBP,MAAAA,OAAO,CAACC,GAAR,CAAYM,GAAZ;AACE,WAAKH,QAAL,CAAc;AACV3C,QAAAA,KAAK,EAAE8C,GAAG,CAACd,IAAJ,CAAShC;AADN,OAAd;AAGAuC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKzC,KAAL,CAAWC,KAAvB;AAEH,KAPK,CAOJH,IAPI,CAOC,IAPD,CADV,EASKkD,KATL,CASWC,GAAG,IAAIT,OAAO,CAACC,GAAR,CAAY,YAAYQ,GAAxB,CATlB;AAUF;;AAICC,EAAAA,MAAM,GAAG;AACPV,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,wBACE;AAAK,MAAA,EAAE,EAAG,aAAV;AAAA,6BACI,QAAC,KAAD;AAAO,QAAA,OAAO,EAAE,KAAKzC,KAAL,CAAWK,OAA3B;AAAqC,QAAA,UAAU,EAAE,KAAKL,KAAL,CAAWE,YAA5D;AAA0E,QAAA,SAAS,MAAnF;AAAoF,QAAA,MAAM,EAAE;AAA5F;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADF;AAOD;;AAvF+B;;AA0FlC,eAAeV,SAAf","sourcesContent":["import React, { Component } from 'react';\nimport {Link} from 'react-router-dom';\nimport Chart from 'kaktana-react-lightweight-charts'\nimport './dashboard.css';\n\nimport axios from 'axios'\n//pass in viewed user, connection status, and id of user who is viewing\nclass Dashboard extends Component {\n  bcws = new WebSocket (\"wss://stream.binance.us:9443/ws/btcusdt@trade\");\n  constructor(props){\n    super(props);\n    \n    this.updatePosts= this.updatePosts.bind(this);\n\n    this.bcOnMessage = this.bcOnMessage.bind(this);\n    this.state = {\n      posts : [],\n      bcLineSeries : [],\n      bcData: [],\n      bcPrice: 0,\n      options: {\n        alignLabels: true,\n        timeScale: {\n          rightOffset: 12,\n          barSpacing: 3,\n          fixLeftEdge: true,\n          lockVisibleTimeRangeOnResize: true,\n          rightBarStaysOnScroll: true,\n          borderVisible: false,\n          borderColor: \"#fff000\",\n          visible: true,\n          timeVisible: true,\n          secondsVisible: false\n        }\n      },\n\n    };\n    \n  }\n  \n  componentDidMount(){\n    const user = localStorage.getItem(\"userID\");\n    alert(user);\n    if (user.length ==0) {\n        alert(\"you are not logged in\");\n        window.location.href = '/login';\n    }this.bcws.onmessage = (e)=> this.bcOnMessage(e);\n    this.updatePosts();\n}\n  \nbcOnMessage(event){\n    var response = JSON.parse(event.data)\n    var utcMiliSec = response.E\n    var temp = {time: utcMiliSec, value: response.p}\n    var data = this.state.bcData;\n    console.log(data);\n    var lineSeries = this.state.bcLineSeries;\n    console.log(lineSeries);\n    data.push(temp)\n    lineSeries.data = data\n    this.setState({\n        bcData: data,\n        bcPrice: response.p,\n        bcLineSeries: lineSeries\n    })\n    \n}\nupdatePosts(){\n    const user = localStorage.getItem(\"userID\");\n  \n  \n   axios.post(\"http://localhost:5000/posts/byuser\", {user: user})\n       .then(function(res){\n         console.log(res);\n           this.setState({\n               posts: res.data.posts\n           });\n           console.log(this.state.posts);\n           \n       }.bind(this)) \n       .catch(err => console.log('Error: ' + err));\n}\n\n  \n  \n  render() {\n    console.log(\"render\");\n    return (\n      <div id = \"postDisplay\">\n          <Chart options={this.state.options}  lineSeries={this.state.bcLineSeries} autoWidth height={320} />\n        \n       \n      </div>\n    );\n  }\n}\n \nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}