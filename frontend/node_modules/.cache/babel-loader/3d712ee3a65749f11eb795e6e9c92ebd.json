{"ast":null,"code":"var _jsxFileName = \"/Users/work/Documents/GitHub/minimalist_social_media/minesse/src/components/post-display-prof.component.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios'; //pass in viewed user, connection status, and id of user who is viewing\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ProfPosts extends Component {\n  constructor(props) {\n    super(props);\n    this.updatePosts = this.updatePosts.bind(this);\n    this.editPost = this.editPost.bind(this);\n    this.deletePost = this.deletePost.bind(this);\n    this.nextPost = this.nextPost.bind(this);\n    this.previousPost = this.previousPost.bind(this);\n    this.renderSelf = this.renderSelf.bind(this); //renders buttons users get if post is their own\n\n    this.state = {\n      posts: [],\n      currPost: 0\n    };\n  }\n\n  componentDidMount() {\n    this.updatePosts();\n  }\n\n  nextPost() {\n    if (this.state.currPost < this.state.posts.length) {\n      this.setState({\n        currPost: this.state.currPost + 1\n      });\n    }\n  }\n\n  previousPost() {\n    if (this.state.currPost > 0) {\n      this.setState({\n        currPost: this.state.currPost - 1\n      });\n    }\n  }\n\n  deletePost() {\n    const id = this.state.posts[this.state.currPost]._id;\n    axios.delete(\"http://localhost:5000/posts/\" + id).then(function (res) {\n      alert(res.data);\n      this.updatePosts();\n    }.bind(this)).catch(err => console.log('Error: ' + err));\n  }\n\n  editPost() {\n    const id = this.state.posts[this.state.currPost]._id; //TODO route to edit post page with id as param\n  }\n\n  updatePosts() {\n    const byUser = this.props.viewedUser._id;\n    const byuserData = {\n      user: byUser\n    };\n    axios.post(\"http://localhost:5000/posts/byuser\", byuserData).then(function (res) {\n      this.setState({\n        posts: res.data\n      });\n      console.log(this.state.posts);\n    }.bind(this)).catch(err => console.log('Error: ' + err));\n  } //give user edit/delete permissions on their own posts\n\n\n  renderSelf() {\n    if (this.props.status == 'self') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.editPost,\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.deletePost,\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }, this);\n    }\n  }\n\n  render() {\n    const currPosts = this.state.posts;\n\n    if (!currPosts.length) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [this.props.viewedUser.username, \" has no posts\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 14\n      }, this);\n    }\n\n    let posI = this.state.currPost;\n\n    while (posI >= currPosts.length) {\n      posI--;\n    }\n\n    const post = currPosts[posI];\n    const imageName = post.photoName;\n    const caption = post.caption;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"postDisplay\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: process.env.PUBLIC_URL + '/images_uploads/' + imageName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: caption\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.previousPost,\n        children: \"Previous\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.nextPost,\n        children: \"Next\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(this.renderSelf, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ProfPosts;","map":{"version":3,"sources":["/Users/work/Documents/GitHub/minimalist_social_media/minesse/src/components/post-display-prof.component.js"],"names":["React","Component","Link","axios","ProfPosts","constructor","props","updatePosts","bind","editPost","deletePost","nextPost","previousPost","renderSelf","state","posts","currPost","componentDidMount","length","setState","id","_id","delete","then","res","alert","data","catch","err","console","log","byUser","viewedUser","byuserData","user","post","status","render","currPosts","username","posI","imageName","photoName","caption","process","env","PUBLIC_URL"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {Link} from 'react-router-dom';\n\nimport axios from 'axios'\n//pass in viewed user, connection status, and id of user who is viewing\nclass ProfPosts extends Component {\n  constructor(props){\n    super(props);\n    \n    this.updatePosts= this.updatePosts.bind(this);\n    this.editPost = this.editPost.bind(this);\n    this.deletePost = this.deletePost.bind(this);\n\n    this.nextPost = this.nextPost.bind(this);\n    this.previousPost = this.previousPost.bind(this);\n    this.renderSelf = this.renderSelf.bind(this); //renders buttons users get if post is their own\n    this.state = {\n      posts : [],\n      currPost : 0,\n    };\n  }\n  componentDidMount(){\n    this.updatePosts();\n}\n  nextPost(){\n    if(this.state.currPost < this.state.posts.length){\n        this.setState({\n            currPost : this.state.currPost + 1\n        })\n    }\n\n}\npreviousPost(){\n    if(this.state.currPost > 0 ){\n        this.setState({\n            currPost : this.state.currPost - 1\n        })\n    }\n}\ndeletePost(){\n  const id = this.state.posts[this.state.currPost]._id;\n  axios.delete(\"http://localhost:5000/posts/\" + id)\n  .then(function(res){\n      alert(res.data);\n      this.updatePosts();\n  }.bind(this)) \n  .catch(err => console.log('Error: ' + err));\n}\neditPost(){\n  const id = this.state.posts[this.state.currPost]._id;\n  //TODO route to edit post page with id as param\n}\nupdatePosts(){\n  const byUser = this.props.viewedUser._id;\n  const byuserData = {\n      user: byUser\n  }\n   axios.post(\"http://localhost:5000/posts/byuser\", byuserData)\n       .then(function(res){\n           this.setState({\n               posts: res.data\n           });\n           console.log(this.state.posts);\n           \n       }.bind(this)) \n       .catch(err => console.log('Error: ' + err));\n}\n//give user edit/delete permissions on their own posts\nrenderSelf(){\n  \n  if(this.props.status =='self'){\n    return(\n      <div>\n        <button onClick = {this.editPost}>Edit</button>\n        <button onClick = {this.deletePost}>Delete</button>\n      </div>\n    )\n  }\n}\n  render() {\n    const currPosts = this.state.posts;\n    if(!currPosts.length){\n      return(<p>{this.props.viewedUser.username} has no posts</p>);\n    }\n            \n    let posI = this.state.currPost\n    while(posI>= currPosts.length){\n      posI--;\n    }\n    const post = currPosts[posI];\n    const imageName = post.photoName;\n    const caption = post.caption;\n    return (\n      <div id = \"postDisplay\">\n        <img src={process.env.PUBLIC_URL + '/images_uploads/' + imageName} />\n        <p>{caption}</p>\n        <button onClick = {this.previousPost}>Previous</button>\n        <button onClick = {this.nextPost}>Next</button>\n        <this.renderSelf/>\n      </div>\n    );\n  }\n}\n\nexport default ProfPosts;"]},"metadata":{},"sourceType":"module"}