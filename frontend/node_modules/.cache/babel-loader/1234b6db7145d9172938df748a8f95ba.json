{"ast":null,"code":"var defaultBindingOptions = {\n  allowDownsampling: true\n};\nexport function bindToDevicePixelRatio(canvas, options) {\n  if (options === void 0) {\n    options = defaultBindingOptions;\n  }\n\n  return new DevicePixelRatioBinding(canvas, options);\n}\n\nvar DevicePixelRatioBinding =\n/** @class */\nfunction () {\n  function DevicePixelRatioBinding(canvas, options) {\n    var _this = this;\n\n    this._resolutionMediaQueryList = null;\n\n    this._resolutionListener = function (ev) {\n      return _this._onResolutionChanged();\n    };\n\n    this._canvasConfiguredListeners = [];\n    this.canvas = canvas;\n    this._canvasSize = {\n      width: this.canvas.clientWidth,\n      height: this.canvas.clientHeight\n    };\n    this._options = options;\n\n    this._configureCanvas();\n\n    this._installResolutionListener();\n  }\n\n  DevicePixelRatioBinding.prototype.destroy = function () {\n    this._canvasConfiguredListeners.length = 0;\n\n    this._uninstallResolutionListener();\n\n    this.canvas = null;\n  };\n\n  Object.defineProperty(DevicePixelRatioBinding.prototype, \"canvasSize\", {\n    get: function () {\n      return {\n        width: this._canvasSize.width,\n        height: this._canvasSize.height\n      };\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  DevicePixelRatioBinding.prototype.resizeCanvas = function (size) {\n    this._canvasSize = {\n      width: size.width,\n      height: size.height\n    };\n\n    this._configureCanvas();\n  };\n\n  Object.defineProperty(DevicePixelRatioBinding.prototype, \"pixelRatio\", {\n    get: function () {\n      // According to DOM Level 2 Core specification, ownerDocument should never be null for HTMLCanvasElement\n      // see https://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#node-ownerDoc\n      var win = this.canvas.ownerDocument.defaultView;\n\n      if (win == null) {\n        throw new Error('No window is associated with the canvas');\n      }\n\n      return win.devicePixelRatio > 1 || this._options.allowDownsampling ? win.devicePixelRatio : 1;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  DevicePixelRatioBinding.prototype.subscribeCanvasConfigured = function (listener) {\n    this._canvasConfiguredListeners.push(listener);\n  };\n\n  DevicePixelRatioBinding.prototype.unsubscribeCanvasConfigured = function (listener) {\n    this._canvasConfiguredListeners = this._canvasConfiguredListeners.filter(function (l) {\n      return l != listener;\n    });\n  };\n\n  DevicePixelRatioBinding.prototype._configureCanvas = function () {\n    var ratio = this.pixelRatio;\n    this.canvas.style.width = this._canvasSize.width + \"px\";\n    this.canvas.style.height = this._canvasSize.height + \"px\";\n    this.canvas.width = this._canvasSize.width * ratio;\n    this.canvas.height = this._canvasSize.height * ratio;\n\n    this._emitCanvasConfigured();\n  };\n\n  DevicePixelRatioBinding.prototype._emitCanvasConfigured = function () {\n    var _this = this;\n\n    this._canvasConfiguredListeners.forEach(function (listener) {\n      return listener.call(_this);\n    });\n  };\n\n  DevicePixelRatioBinding.prototype._installResolutionListener = function () {\n    if (this._resolutionMediaQueryList !== null) {\n      throw new Error('Resolution listener is already installed');\n    } // According to DOM Level 2 Core specification, ownerDocument should never be null for HTMLCanvasElement\n    // see https://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#node-ownerDoc\n\n\n    var win = this.canvas.ownerDocument.defaultView;\n\n    if (win == null) {\n      throw new Error('No window is associated with the canvas');\n    }\n\n    var dppx = win.devicePixelRatio;\n    this._resolutionMediaQueryList = win.matchMedia(\"all and (resolution: \" + dppx + \"dppx)\"); // IE and some versions of Edge do not support addEventListener/removeEventListener, and we are going to use the deprecated addListener/removeListener\n\n    this._resolutionMediaQueryList.addListener(this._resolutionListener);\n  };\n\n  DevicePixelRatioBinding.prototype._uninstallResolutionListener = function () {\n    if (this._resolutionMediaQueryList !== null) {\n      // IE and some versions of Edge do not support addEventListener/removeEventListener, and we are going to use the deprecated addListener/removeListener\n      this._resolutionMediaQueryList.removeListener(this._resolutionListener);\n\n      this._resolutionMediaQueryList = null;\n    }\n  };\n\n  DevicePixelRatioBinding.prototype._reinstallResolutionListener = function () {\n    this._uninstallResolutionListener();\n\n    this._installResolutionListener();\n  };\n\n  DevicePixelRatioBinding.prototype._onResolutionChanged = function () {\n    this._configureCanvas();\n\n    this._reinstallResolutionListener();\n  };\n\n  return DevicePixelRatioBinding;\n}();","map":{"version":3,"sources":["/Users/work/Documents/GitHub/referall-project/frontend/node_modules/fancy-canvas/coordinate-space.js"],"names":["defaultBindingOptions","allowDownsampling","bindToDevicePixelRatio","canvas","options","DevicePixelRatioBinding","_this","_resolutionMediaQueryList","_resolutionListener","ev","_onResolutionChanged","_canvasConfiguredListeners","_canvasSize","width","clientWidth","height","clientHeight","_options","_configureCanvas","_installResolutionListener","prototype","destroy","length","_uninstallResolutionListener","Object","defineProperty","get","enumerable","configurable","resizeCanvas","size","win","ownerDocument","defaultView","Error","devicePixelRatio","subscribeCanvasConfigured","listener","push","unsubscribeCanvasConfigured","filter","l","ratio","pixelRatio","style","_emitCanvasConfigured","forEach","call","dppx","matchMedia","addListener","removeListener","_reinstallResolutionListener"],"mappings":"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","sourcesContent":["var defaultBindingOptions = {\r\n    allowDownsampling: true,\r\n};\r\nexport function bindToDevicePixelRatio(canvas, options) {\r\n    if (options === void 0) { options = defaultBindingOptions; }\r\n    return new DevicePixelRatioBinding(canvas, options);\r\n}\r\nvar DevicePixelRatioBinding = /** @class */ (function () {\r\n    function DevicePixelRatioBinding(canvas, options) {\r\n        var _this = this;\r\n        this._resolutionMediaQueryList = null;\r\n        this._resolutionListener = function (ev) { return _this._onResolutionChanged(); };\r\n        this._canvasConfiguredListeners = [];\r\n        this.canvas = canvas;\r\n        this._canvasSize = {\r\n            width: this.canvas.clientWidth,\r\n            height: this.canvas.clientHeight,\r\n        };\r\n        this._options = options;\r\n        this._configureCanvas();\r\n        this._installResolutionListener();\r\n    }\r\n    DevicePixelRatioBinding.prototype.destroy = function () {\r\n        this._canvasConfiguredListeners.length = 0;\r\n        this._uninstallResolutionListener();\r\n        this.canvas = null;\r\n    };\r\n    Object.defineProperty(DevicePixelRatioBinding.prototype, \"canvasSize\", {\r\n        get: function () {\r\n            return {\r\n                width: this._canvasSize.width,\r\n                height: this._canvasSize.height,\r\n            };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    DevicePixelRatioBinding.prototype.resizeCanvas = function (size) {\r\n        this._canvasSize = {\r\n            width: size.width,\r\n            height: size.height,\r\n        };\r\n        this._configureCanvas();\r\n    };\r\n    Object.defineProperty(DevicePixelRatioBinding.prototype, \"pixelRatio\", {\r\n        get: function () {\r\n            // According to DOM Level 2 Core specification, ownerDocument should never be null for HTMLCanvasElement\r\n            // see https://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#node-ownerDoc\r\n            var win = this.canvas.ownerDocument.defaultView;\r\n            if (win == null) {\r\n                throw new Error('No window is associated with the canvas');\r\n            }\r\n            return win.devicePixelRatio > 1 || this._options.allowDownsampling ? win.devicePixelRatio : 1;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    DevicePixelRatioBinding.prototype.subscribeCanvasConfigured = function (listener) {\r\n        this._canvasConfiguredListeners.push(listener);\r\n    };\r\n    DevicePixelRatioBinding.prototype.unsubscribeCanvasConfigured = function (listener) {\r\n        this._canvasConfiguredListeners = this._canvasConfiguredListeners.filter(function (l) { return l != listener; });\r\n    };\r\n    DevicePixelRatioBinding.prototype._configureCanvas = function () {\r\n        var ratio = this.pixelRatio;\r\n        this.canvas.style.width = this._canvasSize.width + \"px\";\r\n        this.canvas.style.height = this._canvasSize.height + \"px\";\r\n        this.canvas.width = this._canvasSize.width * ratio;\r\n        this.canvas.height = this._canvasSize.height * ratio;\r\n        this._emitCanvasConfigured();\r\n    };\r\n    DevicePixelRatioBinding.prototype._emitCanvasConfigured = function () {\r\n        var _this = this;\r\n        this._canvasConfiguredListeners.forEach(function (listener) { return listener.call(_this); });\r\n    };\r\n    DevicePixelRatioBinding.prototype._installResolutionListener = function () {\r\n        if (this._resolutionMediaQueryList !== null) {\r\n            throw new Error('Resolution listener is already installed');\r\n        }\r\n        // According to DOM Level 2 Core specification, ownerDocument should never be null for HTMLCanvasElement\r\n        // see https://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#node-ownerDoc\r\n        var win = this.canvas.ownerDocument.defaultView;\r\n        if (win == null) {\r\n            throw new Error('No window is associated with the canvas');\r\n        }\r\n        var dppx = win.devicePixelRatio;\r\n        this._resolutionMediaQueryList = win.matchMedia(\"all and (resolution: \" + dppx + \"dppx)\");\r\n        // IE and some versions of Edge do not support addEventListener/removeEventListener, and we are going to use the deprecated addListener/removeListener\r\n        this._resolutionMediaQueryList.addListener(this._resolutionListener);\r\n    };\r\n    DevicePixelRatioBinding.prototype._uninstallResolutionListener = function () {\r\n        if (this._resolutionMediaQueryList !== null) {\r\n            // IE and some versions of Edge do not support addEventListener/removeEventListener, and we are going to use the deprecated addListener/removeListener\r\n            this._resolutionMediaQueryList.removeListener(this._resolutionListener);\r\n            this._resolutionMediaQueryList = null;\r\n        }\r\n    };\r\n    DevicePixelRatioBinding.prototype._reinstallResolutionListener = function () {\r\n        this._uninstallResolutionListener();\r\n        this._installResolutionListener();\r\n    };\r\n    DevicePixelRatioBinding.prototype._onResolutionChanged = function () {\r\n        this._configureCanvas();\r\n        this._reinstallResolutionListener();\r\n    };\r\n    return DevicePixelRatioBinding;\r\n}());\r\n"]},"metadata":{},"sourceType":"module"}